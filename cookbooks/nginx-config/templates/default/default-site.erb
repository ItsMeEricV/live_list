upstream myapp {
  server 127.0.0.1:3000;
  #server unix:///home/vagrant/live_list.sock;
}

server {
  listen   80;
  server_name  <%= node['hostname'] %>;
  sendfile off;

  root /srv/website;
 
  access_log  <%= node['nginx']['log_dir'] %>/access.log;
  error_log  <%= node['nginx']['log_dir'] %>/error.log;

  # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
  #
  #location ~ .php$ {
  #  try_files $uri =404;
  #  fastcgi_split_path_info ^(.+\.php)(/.+)$;
  #  fastcgi_pass unix:/var/run/php-fpm-www.sock;
  #  fastcgi_index index.php;
  #  include fastcgi_params;
  #}


  location /api {
    #try_files $uri $uri/ @ruby;
    proxy_pass http://myapp;
  }

  location /  {
    try_files $uri $uri/ /index.html;
  }

  #location @ruby {
  #  proxy_pass http://myapp;
  #}

}